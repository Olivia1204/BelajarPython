# Data dictionaries for diagnosis and symptom explanations
penyakit_diagnosis = {
    "menggigil": "Demam, Hipotermia",
    "batuk": "Amandel, Flu, Radang",
    "pilek": "Flu, Alergi",
    "mencret": "Diare",
    "lemas": "Tipes, Anemia",
    "demam": "Tipes, Malaria",
    "panas": "Tipes, Malaria",
    "sakit perut": "Maag, Diare/Sembelit",
    "pusing": "Migrain",
    "mual": "Asam lambung, Migrain",
    "sesak napas": "Asma, Pneumonia, Anemia"
}

penjelasan_penyakit = {
    "anemia": "Anemia adalah kondisi di mana tubuh kekurangan sel darah merah atau hemoglobin,\nyang bertugas membawa oksigen ke seluruh tubuh.\nPenyebab : Penyebab anemia bisa bervariasi, mulai dari kekurangan zat besi, vitamin B12, atau folat, \nhingga penyakit tertentu atau kehilangan darah yang berlebihan.",
    "flu": "Penyakit flu, atau influenza, adalah infeksi saluran pernapasan yang disebabkan oleh virus influenza.\nFlu sangat menular dan biasanya menyebar melalui percikan air liur dari batuk atau bersin, serta melalui kontak langsung dengan permukaan yang terkontaminasi.\nPenyebab : Flu disebabkan oleh virus influenza tipe A, B, atau C, dengan tipe A dan B yang paling umum menginfeksi manusia.\nVirus ini bermutasi secara teratur, sehingga strain baru bisa muncul setiap tahun.",
    "migrain": "Migrain merupakan jenis sakit kepala yang terasa seperti berdenyut,\ndan umumnya hanya terjadi pada satu sisi kepala\nPenyebab : \n- Terjadinya perubahan hormon pada wanita, \n- Adanya pemicu dari lingkungan, seperti paparan asap rokok, aroma parfum yang menyengat, dan penghapus cat. \n- Kebiasaan buruk, seperti tubuh kelelahan, kualitas tidur dan postur tubuh yang buruk, mengalami gangguan tidur, hipoglikemia, dan sehabis berolahraga berat.",
    "pneumonia": "Pneumonia adalah peradangan paru-paru yang disebabkan oleh infeksi.\nPenyebab : \n- Pneumonia akibat jamur. \nJenis pneumonia ini paling sering dialami oleh orang yang memiliki sistem kekebalan tubuh yang lemah\natau mengidap penyakit kronis.\n- Pneumonia akibat virus. \nPneumonia juga bisa disebabkan oleh virus yang menjadi pemicu flu  atau pilek. Biasanya yang paling sering mengalami pneumonia ini adalah balita.\n- Pneumonia aspirasi. \nPneumonia ini disebabkan karena pengidap tidak sengaja menghirup objek asing, contohnya muntah, ludah, ataupun makanan dan minuman.",
    "malaria": "Penyakit infeksi menular melalui gigitan nyamuk Anopheles betina.\nPenyebab : Penyebab malaria adalah parasit bersel tunggal dari genus plasmodium. Parasit ini menyebar ke manusia melalui gigitan nyamuk Anopheles betina yang terinfeksi.",
    "hipotermia" : "hipotermia adalah penurunan suhu tubuh secara drastis yang berpotensi berbahaya.\nPenyebab : \n- Berendam di Air Dingin. \nHipotermia dapat timbul dari lingkungan yang dingin, seperti selama musim dingin, atau dapat terjadi secara tiba-tiba \nmisalnya ketika seseorang seseorang jatuh ke air dingin atau terlalu lama berendam di dalam air\n- Pendingin ruangan yang berlebihan. Hal ini rentan dialami oleh orang yang lebih tua.\n- Gangguan metabolisme. \nGangguan metabolisme umumnya menyebabkan tingkat metabolisme basal yang lebih rendah. Gangguan ini menyebabkan tubuh menghasilkan lebih sedikit panas secara internal.",
    "asam lambung" : "Asam lambung adalah cairan yang diproduksi oleh lambung dan diperlukan dalam mencerna makanan yang masuk ke dalam lambung.\nPenyebab : 1. Faktor Gaya Hidup\nmisalnya berupa : Kebiasaan merokok atau terpapar asap rokok. Makan dalam porsi besar sebelum berbaring. \nMenggunakan banyak obat antiinflamasi nonsteroid (NSAID), seperti aspirin dan ibuprofen.\n2. Faktor Kesehatan\nseperti : Kegemukan, kehamilan, kelainan jaringan ikat, Berusia tua.\n3. Kondisi lain\nseperti : Kecemasan\n4. Alkohol\nSemakin besar kuantitas alkohol dan frekuensi konsumsinya, semakin besar pula korelasinya.\n5. Pemicu makanan\n- Makanan berlemak tinggi, misalnya gorengan dan makanan cepat saji.\n- Makanan pedas.\n- Buah-buahan dan sayuran tertentu, seperti nanas, tomat, dan jeruk.\n- Minuman tertentu, seperti kopi, teh, dan minuman berkarbonasi.",
    "amandel" : "Penyakit amandel adalah peradangan yang terjadi pada amandel, yaitu dua kelenjar kecil yang terletak\ndi bagian belakang tenggorokan.\nPenyebab : Amandel bisa meradang akibat infeksi virus atau bakteri. \nInfeksi virus yang umum seperti flu, atau bakteri seperti Streptococcus bisa menyebabkan tonsilitis.",
    "diare" : "Penyakit diare adalah kondisi medis di mana seseorang mengalami buang air besar (BAB) dengan tinja yang encer\ndan frekuensi yang lebih sering dari biasanya",
    "radang" : "Radang, atau inflamasi, adalah respons alami tubuh terhadap infeksi, cedera, atau iritasi.\nPenyebab : \n- Infeksi: Bakteri, virus, atau jamur bisa menyebabkan radang.\n- Gangguan Sistem Kekebalan Tubuh: Pada beberapa penyakit autoimun, sistem kekebalan tubuh menyerang jaringan sehat sehingga menimbulkan radang.",
    "asma" : "Asma adalah penyakit kronis pada saluran pernapasan yang ditandai dengan sesak\nakibat peradangan dan penyempitan pada saluran napas.\nPenyebab : Infeksi pernapasan, seperti flu biasa ; Aktivitas fisik (penyakit pada saluran pernapasan akibat olahraga)\nUdara dingin ; Polutan dan iritasi udara, seperti asap.",
    "tipes" : "Penyakit tipes, atau demam tifoid, adalah infeksi bakteri yang disebabkan oleh Salmonella typhi.\nPenyebab : Penyakit ini biasanya menyebar melalui makanan atau minuman yang terkontaminasi oleh bakteri tersebut. \nTipes lebih umum terjadi di daerah dengan sanitasi yang buruk dan kebersihan lingkungan yang rendah."
}

def saran_tindakan(penyakit):
    print(f"\nSaran untuk penyakit {penyakit}:")
    if penyakit == "Anemia":
        print("Istirahat yang cukup, minum banyak cairan, dan konsumsi obat pereda demam.")
    elif penyakit == "Migrain":
        print("- Beristirahat di kamar yang sepi dengan penerangan minim atau gelap.\n- Melakukan pijatan pada kepala atau pelipis.\n- Memberikan kompres dingin di bagian atas dagu atau belakang leher.\n- Relaksasi otot.")
    elif penyakit == "Pneumonia":
        print("- Minum obat pereda rasa sakit, seperti parasetamol atau ibuprofen yang bisa membantu menurunkan demam. Namun, bagi pengidap pneumonia yang punya alergi terhadap aspirin atau mengidap asma, \ntukak lambung dan gangguan hati, konsumsi obat pereda rasa sakit tidak dianjurkan.\n- Jangan mengonsumsi obat batuk. Batuk justru merupakan cara tubuh untuk mengeluarkan dahak dari paru-paru. Oleh karena itu, hindari meredakan gejala batuk dengan cara mengonsumsi obat batuk. \nMelainkan, kamu bisa minum air hangat yang dicampur madu dan lemon untuk mengurangi batukmu.\n- Berhenti merokok. Apabila kamu seorang perokok dan sudah terdiagnosis mengidap penyakit pneumonia, sebaiknya segera berhenti merokok karena kebiasaan ini bisa memperparah pneumonia.")
    elif penyakit == "Asam lambing":
        print("Untuk meredakan kondisi ini, sebenarnya bisa dimulai dengan menjaga Pola Makan Sehat dan juga Antasida yang memberikan bantuan cepat dengan menetralkan asam lambung.\nJika kondisi sudah parah silahkan periksa ke Dokter/Rumah sakit terdekat.")
    elif penyakit == "Migrain":
        print("Hindari pencetus seperti stres dan makanan tertentu, istirahat di tempat gelap.")
    elif penyakit == "Gastritis":
        print("Hindari makanan pedas, makan dalam porsi kecil, dan konsumsi obat lambung.")
    else:
        print("Konsultasikan kondisi Anda dengan dokter untuk penanganan lebih lanjut.")

print("Selamat datang di Program Medis.Bot!")

while True:
    print("\nMenu:")
    print("1. Diagnosa Penyakit")
    print("2. Penjelasan Penyakit")
    print("3. Keluar")

    pilihan = input("Pilih menu (1/2/3): ")

    if pilihan == "1":
        gejala_user = input("Masukkan gejala yang Anda alami (pisahkan dengan koma): ").lower().split(", ")
        kemungkinan_penyakit = {}
        
        # Mencocokkan gejala dengan penyakit
        for gejala in gejala_user:
            if gejala in penyakit_diagnosis:
                penyakit_list = penyakit_diagnosis[gejala].split(", ")
                for penyakit in penyakit_list:
                    if penyakit in kemungkinan_penyakit:
                        kemungkinan_penyakit[penyakit] += 1
                    else:
                        kemungkinan_penyakit[penyakit] = 1

        if kemungkinan_penyakit:
            diagnosis_teratas = sorted(kemungkinan_penyakit.items(), key=lambda x: x[1], reverse=True)
            print("\nBerdasarkan gejala yang Anda masukkan, kemungkinan penyakit Anda adalah:")
            for penyakit, frekuensi in diagnosis_teratas:
                print(f"- {penyakit} (kemungkinan {frekuensi} gejala cocok)")
            # Memberikan saran tindakan berdasarkan penyakit dengan frekuensi tertinggi
            saran_tindakan(diagnosis_teratas[0][0])
        else:
            print("\nGejala yang Anda masukkan tidak cocok dengan database penyakit yang ada.")

        input("\nTekan Enter untuk kembali ke menu...")

    elif pilihan == "2":
        penyakit = input("Masukkan penyakit yang ingin Anda ketahui: ").lower()
        if penyakit in penjelasan_penyakit:
            print(f"\nPenjelasan: {penjelasan_penyakit[penyakit]}")
        else:
            print("\nPenyakit tidak ditemukan dalam database.")

        input("\nTekan Enter untuk kembali ke menu...")

    elif pilihan == "3":
        print("Terima kasih telah menggunakan program Medis.Bot! Semoga lekas sembuh yaa!")
        break

    else:
        print("Pilihan tidak valid. Silakan coba lagi.")
        input("\nTekan Enter untuk kembali ke menu...")
